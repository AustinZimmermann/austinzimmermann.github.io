<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Wars: Episode IV – A New Hope | Galactic Torrents</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- JSON-LD Structured Data for SEO Simulation -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Movie",
      "name": "Star Wars: Episode IV - A New Hope",
      "alternateName": "Star Wars: A New Hope",
      "datePublished": "1977-05-25",
      "director": {
        "@type": "Person",
        "name": "George Lucas"
      },
      "description": "Luke Skywalker joins forces with a Jedi Knight, a cocky pilot, a Wookiee and two droids to save the galaxy from the Empire’s world-destroying battle station.",
      "image": "https://placehold.co/600x900/1a1a1a/gold?text=Star+Wars+IV",
      "videoQuality": "720p",
      "encodingFormat": "H.264"
    }
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .star-wars-gradient {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
    </style>
</head>
<body class="min-h-screen pb-12">

    <!-- Header / Navigation -->
    <nav class="sticky top-0 z-50 glass border-b border-slate-700 px-4 py-3">
        <div class="max-w-6xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center font-bold text-slate-900">GT</div>
                <span class="text-xl font-bold tracking-tight hidden sm:inline">Galactic<span class="text-yellow-500">Torrents</span></span>
            </div>
            <div class="flex-1 max-w-md mx-8 hidden md:block">
                <div class="relative">
                    <input type="text" placeholder="Search the galaxy..." class="w-full bg-slate-800 border border-slate-700 rounded-full px-4 py-1.5 focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm">
                </div>
            </div>
            <div class="flex items-center space-x-4 text-sm font-medium">
                <a href="#" class="hover:text-yellow-500 transition">Browse</a>
                <a href="#" class="hover:text-yellow-500 transition">Upload</a>
                <div id="user-display" class="bg-slate-800 px-3 py-1 rounded-full text-xs text-slate-400">Loading Auth...</div>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-4 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <!-- Left Column: Poster & Quick Specs -->
        <div class="lg:col-span-4 space-y-6">
            <div class="rounded-2xl overflow-hidden shadow-2xl border border-slate-700">
                <img src="https://placehold.co/600x900/020617/FFE81F?text=STAR+WARS%0AEpisode+IV" alt="Star Wars Movie Poster" class="w-full h-auto">
            </div>
            
            <div class="glass p-6 rounded-2xl space-y-4">
                <h3 class="font-semibold text-slate-300 uppercase text-xs tracking-wider">Technical Info</h3>
                <div class="grid grid-cols-2 gap-4 text-sm">
                    <div>
                        <p class="text-slate-500">Resolution</p>
                        <p class="font-medium">1280x720 (720p)</p>
                    </div>
                    <div>
                        <p class="text-slate-500">Audio</p>
                        <p class="font-medium">DDP 5.1</p>
                    </div>
                    <div>
                        <p class="text-slate-500">Codec</p>
                        <p class="font-medium">H.264 / AVC</p>
                    </div>
                    <div>
                        <p class="text-slate-500">Source</p>
                        <p class="font-medium">DSNP WEB-DL</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Details, Download, Comments -->
        <div class="lg:col-span-8 space-y-6">
            <div class="space-y-2">
                <div class="flex items-center space-x-2 text-xs text-yellow-500 font-bold uppercase tracking-widest">
                    <span>Movies</span>
                    <span>•</span>
                    <span>Sci-Fi</span>
                    <span>•</span>
                    <span>1977</span>
                </div>
                <h1 class="text-3xl md:text-4xl font-bold">Star Wars: Episode IV – A New Hope</h1>
                <p class="text-slate-400 text-sm break-all font-mono p-2 bg-slate-900 rounded border border-slate-800">
                    Star.Wars.A.New.Hope.Episode.IV.1977.720p.DSNP.WEB-DL.DDP5.1.H.264-INTERNAL.mkv
                </p>
            </div>

            <!-- Stats Bar -->
            <div class="flex flex-wrap gap-4 py-4 border-y border-slate-800">
                <div class="flex items-center space-x-2">
                    <span class="text-green-500 font-bold">1,452</span>
                    <span class="text-xs text-slate-500">Seeders</span>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-red-500 font-bold">89</span>
                    <span class="text-xs text-slate-500">Leechers</span>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-slate-300 font-bold">4.2 GB</span>
                    <span class="text-xs text-slate-500">Size</span>
                </div>
                <div class="ml-auto flex items-center space-x-2">
                    <span class="text-xs text-slate-500 italic">Uploaded by:</span>
                    <span class="text-yellow-500 text-xs font-bold uppercase">INTERNAL-FORCE</span>
                </div>
            </div>

            <!-- Download Buttons -->
            <div class="flex flex-col sm:flex-row gap-4">
                <button onclick="simulateDownload('Magnet')" class="flex-1 bg-yellow-500 hover:bg-yellow-400 text-slate-950 font-bold py-4 rounded-xl shadow-lg transition transform hover:-translate-y-1 active:translate-y-0 flex items-center justify-center space-x-2">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9v4c0 1.1.9 2 2 2h2v-4H7V9c0-2.76 2.24-5 5-5s5 2.24 5 5v2h-2v4h2c1.1 0 2-.9 2-2V9c0-3.87-3.13-7-7-7zM7 17c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                    <span>MAGNET DOWNLOAD</span>
                </button>
                <button onclick="simulateDownload('Torrent')" class="flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-4 rounded-xl transition flex items-center justify-center space-x-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                    <span>DIRECT .TORRENT</span>
                </button>
            </div>

            <!-- Description -->
            <div class="glass p-6 rounded-2xl space-y-4">
                <h2 class="text-xl font-bold border-b border-slate-700 pb-2">Synopsis</h2>
                <p class="text-slate-300 leading-relaxed text-sm md:text-base">
                    The Imperial Forces, under orders from cruel Darth Vader, hold Princess Leia hostage in their efforts to quell the rebellion against the Galactic Empire. Luke Skywalker and Han Solo, captain of the Millennium Falcon, work together with the companionable droid duo R2-D2 and C-3PO to rescue the beautiful princess, help the Rebel Alliance, and restore freedom and justice to the Galaxy.
                </p>
            </div>

            <!-- Real-time Comments (Firebase) -->
            <div class="glass p-6 rounded-2xl space-y-6">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-bold">Comments</h2>
                    <span id="comment-count" class="text-xs bg-slate-700 px-2 py-1 rounded text-slate-300">0 Total</span>
                </div>

                <!-- Post Comment Form -->
                <div class="space-y-3">
                    <textarea id="comment-input" rows="3" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-sm focus:ring-2 focus:ring-yellow-500 focus:outline-none placeholder-slate-500" placeholder="Join the discussion..."></textarea>
                    <div class="flex justify-end">
                        <button id="btn-post" class="bg-yellow-500 text-slate-900 px-6 py-2 rounded-lg font-bold text-sm hover:bg-yellow-400 transition">Post Comment</button>
                    </div>
                </div>

                <!-- Comments List -->
                <div id="comments-container" class="space-y-4 max-h-[400px] overflow-y-auto pr-2">
                    <div class="text-center py-8 text-slate-500 animate-pulse">Scanning the holonet...</div>
                </div>
            </div>
        </div>
    </main>

    <!-- UI Feedback Modal (Replacement for alert) -->
    <div id="custom-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
        <div class="bg-slate-800 border border-slate-700 p-8 rounded-2xl max-w-sm w-full text-center space-y-4">
            <div id="modal-icon" class="mx-auto w-12 h-12 bg-yellow-500/20 text-yellow-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            </div>
            <h3 id="modal-title" class="text-xl font-bold">Action Triggered</h3>
            <p id="modal-body" class="text-slate-400 text-sm">Download has been initiated in your simulated client.</p>
            <button onclick="closeModal()" class="w-full bg-slate-700 hover:bg-slate-600 py-2 rounded-lg font-bold transition">Dismiss</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, addDoc, collection, query, onSnapshot, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Config
        const firebaseConfig = JSON.parse(__firebase_config);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'star-wars-torrent-demo';
        
        // Initialize
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        setLogLevel('error');

        let currentUser = null;

        // Auth Setup
        async function setupAuth() {
            try {
                if (typeof __initial_auth_token !== 'undefined') {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Auth error:", error);
                document.getElementById('user-display').innerText = "Guest Mode";
            }
        }

        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                document.getElementById('user-display').innerText = `ID: ${user.uid.substring(0, 8)}...`;
                initComments();
            }
        });

        // Real-time Comments Logic
        function initComments() {
            // Public path for the app artifact
            const commentsRef = collection(db, 'artifacts', appId, 'public', 'data', 'comments');
            const q = query(commentsRef);

            onSnapshot(q, (snapshot) => {
                const container = document.getElementById('comments-container');
                const countBadge = document.getElementById('comment-count');
                
                if (snapshot.empty) {
                    container.innerHTML = `<div class="text-center py-8 text-slate-500">No transmissions yet. Be the first to comment!</div>`;
                    countBadge.innerText = "0 Total";
                    return;
                }

                const comments = [];
                snapshot.forEach(doc => {
                    comments.push({ id: doc.id, ...doc.data() });
                });

                // Sort in memory (avoiding orderBy for simplicity/index reasons)
                comments.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));

                countBadge.innerText = `${comments.length} Total`;
                container.innerHTML = comments.map(c => `
                    <div class="p-4 rounded-xl bg-slate-800/50 border border-slate-700/50 space-y-1">
                        <div class="flex items-center justify-between">
                            <span class="text-xs font-bold text-yellow-500 uppercase tracking-tighter">User-${c.userId?.substring(0, 6)}</span>
                            <span class="text-[10px] text-slate-500">${c.timestamp ? new Date(c.timestamp.seconds * 1000).toLocaleDateString() : 'Just now'}</span>
                        </div>
                        <p class="text-sm text-slate-200">${sanitize(c.text)}</p>
                    </div>
                `).join('');
            });
        }

        // Post Comment
        document.getElementById('btn-post').addEventListener('click', async () => {
            const input = document.getElementById('comment-input');
            const text = input.value.trim();
            
            if (!text || !currentUser) return;

            try {
                const commentsRef = collection(db, 'artifacts', appId, 'public', 'data', 'comments');
                await addDoc(commentsRef, {
                    text: text,
                    userId: currentUser.uid,
                    timestamp: serverTimestamp()
                });
                input.value = '';
            } catch (err) {
                console.error("Error posting:", err);
            }
        });

        function sanitize(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        setupAuth();
    </script>

    <script>
        // UI Helpers
        function simulateDownload(type) {
            const modal = document.getElementById('custom-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            
            title.innerText = `${type} Requested`;
            body.innerText = `You have initiated a ${type.toLowerCase()} request for Star Wars: A New Hope (720p). This is a functional UI demonstration.`;
            
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('custom-modal').classList.add('hidden');
        }
    </script>
</body>
</html>