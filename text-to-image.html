<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text to Image Generator</title>

<style>
body {
    font-family: Helvetica, sans-serif;
    background: #f4f6f9;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

.container {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    width: 400px;
    text-align: center;
}

h2 {
    margin-bottom: 15px;
}

input, select {
    width: 100%;
    padding: 8px;
    margin: 8px 0;
}

canvas {
    margin-top: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

button {
    padding: 10px 15px;
    margin-top: 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    background: #4CAF50;
    color: white;
    font-weight: bold;
}

button:hover {
    background: #45a049;
}
</style>
</head>
<body>

<div class="container">
    <h2>Text to Image Generator</h2>

    <input type="text" id="textInput" placeholder="Enter your text">

    <label>Font Size:</label>
    <select id="fontSize">
        <option value="20">20px</option>
        <option value="30" selected>30px</option>
        <option value="40">40px</option>
        <option value="50">50px</option>
    </select>

    <label>Text Color:</label>
    <input type="color" id="textColor" value="#000000">

    <label>Background Color:</label>
    <input type="color" id="bgColor" value="#ffffff">

    <button onclick="generateImage()">Generate Image</button>
    <button onclick="downloadImage()">Download PNG</button>

    <canvas id="canvas" width="350" height="200"></canvas>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function generateImage() {
    const text = document.getElementById("textInput").value;
    const fontSize = document.getElementById("fontSize").value;
    const textColor = document.getElementById("textColor").value;
    const bgColor = document.getElementById("bgColor").value;

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Background
    ctx.fillStyle = bgColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Text styling
    ctx.fillStyle = textColor;
    ctx.font = fontSize + "px Helvetica";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    // Wrap text
    wrapText(ctx, text, canvas.width / 2, canvas.height / 2, canvas.width - 20, fontSize);
}

function wrapText(context, text, x, y, maxWidth, lineHeight) {
    const words = text.split(' ');
    let line = '';
    let lines = [];

    for (let n = 0; n < words.length; n++) {
        let testLine = line + words[n] + ' ';
        let metrics = context.measureText(testLine);
        let testWidth = metrics.width;

        if (testWidth > maxWidth && n > 0) {
            lines.push(line);
            line = words[n] + ' ';
        } else {
            line = testLine;
        }
    }
    lines.push(line);

    let totalHeight = lines.length * lineHeight;
    let startY = y - totalHeight / 2 + lineHeight / 2;

    for (let i = 0; i < lines.length; i++) {
        context.fillText(lines[i], x, startY + i * lineHeight);
    }
}

function downloadImage() {
    const link = document.createElement('a');
    link.download = 'text-image.png';
    link.href = canvas.toDataURL();
    link.click();
}
</script>

</body>
</html>
